<div>
    <nz-breadcrumb>
        <nz-breadcrumb-item>
            {{'nav.home'|translate}}
        </nz-breadcrumb-item>
        <nz-breadcrumb-item>
            <a>{{'nav.inbound'|translate}}</a>
        </nz-breadcrumb-item>
        <nz-breadcrumb-item>
            {{'nav.inbound'|translate}}
        </nz-breadcrumb-item>
    </nz-breadcrumb>
</div>
<form nz-form [formGroup]="queryForm" class="ant-advanced-search-form">
    <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="8" *ngFor="let control of controlArray" [hidden]="!control.show">
            <nz-form-item nzFlex>
                <nz-form-label [nzFor]="'field' + control.index">{{ control.code }}</nz-form-label>
                <nz-form-control>
                    <input nz-input [placeholder]="control.id" [formControlName]="'q_ctrl_inbound_' + control.id" />
                </nz-form-control>
            </nz-form-item>
        </div>
    </div>
    <div nz-row>
        <div nz-col [nzSpan]="24" class="search-area">
            <button nz-button [nzType]="'primary'" (click)="doQuery()">{{'button.search'|translate}}</button>
            <button nz-button (click)="resetForm()">{{'button.clear'|translate}}</button>
            <a class="collapse" (click)="toggleCollapse()">
                {{'button.collapse'|translate}}
                <i nz-icon [nzType]="isCollapse ? 'down' : 'up'"></i>
            </a>
        </div>
    </div>
</form>
<nz-divider nzText=""></nz-divider>
<button nz-button [nzType]="'primary'" (click)="doAdd()"><span>Add Inbound</span></button>
<nz-modal [(nzVisible)]="isVisible" nzTitle="The first Modal" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()"
    nzWidth="1000" nzTitle="Create One Receiving">
    <form nz-form [formGroup]="validateForm" class="ant-advanced-edit-form">
        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                    <nz-form-label>{{'data.warehouse'|translate}}</nz-form-label>
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a warehouse"
                        formControlName="ctrl_inbound_whId">
                        <nz-option nzLabel="Shanghai" nzValue="10001"></nz-option>
                        <nz-option nzLabel="Beijing" nzValue="10002"></nz-option>
                    </nz-select>
                </nz-form-item>
            </div>
            <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                    <nz-form-label>{{'data.customer'|translate}}</nz-form-label>
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a customer"
                        formControlName="ctrl_inbound_custId">
                        <nz-option nzLabel="Calzedonia" nzValue="20001"></nz-option>
                    </nz-select>
                </nz-form-item>
            </div>
            <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                    <nz-form-label>{{'data.brand'|translate}}</nz-form-label>
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a brand"
                            formControlName="ctrl_inbound_brandId">
                            <nz-option nzLabel="Calzedonia" nzValue="20001"></nz-option>
                            <nz-option nzLabel="Intimissimi" nzValue="20002"></nz-option>
                            <nz-option nzLabel="Tezenis " nzValue="20003"></nz-option>
                            <nz-option nzLabel="Falconeri " nzValue="20004"></nz-option>
                        </nz-select>
                </nz-form-item>
            </div>
        </div>
        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                    <nz-form-label>{{'data.bizCode'|translate}}</nz-form-label>
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a bizCode"
                        formControlName="ctrl_inbound_bizCode">
                        <nz-option nzLabel="Retail" nzValue="Retail"></nz-option>
                        <nz-option nzLabel="EComm" nzValue="EComm"></nz-option>
                    </nz-select>
                </nz-form-item>
            </div>
            <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                    <nz-form-label>{{'data.goodsType'|translate}}</nz-form-label>
                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a goodsType"
                        formControlName="ctrl_inbound_goodsType">
                        <nz-option nzLabel="Matrial" nzValue="Mat"></nz-option>
                        <nz-option nzLabel="Product" nzValue="Prod"></nz-option>
                    </nz-select>
                </nz-form-item>
            </div>
            <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                    <nz-form-label>{{'data.invoiceNo'|translate}}</nz-form-label>
                    <nz-form-control>
                        <input nz-input placeholder="placeholder" [formControlName]="'ctrl_inbound_invoiceNo'" />
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>
        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="8">
                <nz-form-item nzFlex>
                    <label nz-checkbox [formControlName]="'ctrl_inbound_isCiq'">isCiq</label>
                </nz-form-item>
            </div>
        </div>
    </form>
</nz-modal>
<button nz-button [nzType]="'danger'" (click)="doRcv()"><span>{{'button.rcvAffirm'|translate}}</span></button>
<button nz-button [nzType]="'primary'" (click)="doQc()"><span>{{'button.qcAffirm'|translate}}</span></button>
<button nz-button [nzType]="'primary'" (click)="doPutAway()"><span>{{'button.putAwayAffirm'|translate}} </span></button>
<div class="search-result-list">
    <nz-table #xTable [nzData]="inboundList" [nzFrontPagination]="false" [nzPageSize]="20" [nzTotal]="total"
        [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize" (nzCurrentPageDataChange)="currentPageDataChange($event)"
        (nzPageIndexChange)="changePageIndex($event)" (nzPageSizeChange)="changePageSize($event)">
        <thead>
            <tr>
                <th nzShowCheckbox [(nzChecked)]="isAllDisplayDataChecked" [nzIndeterminate]="isIndeterminate"
                    (nzCheckedChange)="checkAll($event)"></th>
                <th>notice</th>
                <th>batch No</th>
                <th>warehouse id</th>
                <th>customer id</th>
                <th>brand id</th>
                <th>asn Id</th>
                <th>status</th>
                <th>rcv status</th>
                <th>qc status</th>
                <th>pa status</th>
                <th>created Time</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let data of xTable.data">
                <td nzShowCheckbox [(nzChecked)]="mapOfCheckedId[data.id]" [nzDisabled]="data.disabled" 
                    (nzCheckedChange)="refreshStatus()"></td>
                <td><a routerLink='/in/inboundDetails/{{ data.id }}'>{{ data.code }}</a></td>
                <td>{{ data.batchNo}}</td>
                <td>{{ data.whId }}</td>
                <td>{{ data.custId }}</td>
                <td>{{ data.brandId }}</td>
                <td><a routerLink='/in/asn/asnDetails/{{ data.asnId }}'>{{ data.asnId }}</a></td>
                <td>{{data.status}}</td>
                <td>{{data.rStatus}}</td>
                <td>{{data.qcStatus}}</td>
                <td>{{data.pStatus}}</td>
                <td>{{ data.createdTime| date:'yyyy-MM-dd HH:mm':'GMT+08:00'}}</td>
            </tr>
        </tbody>
    </nz-table>
</div>